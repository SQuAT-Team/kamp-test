package edu.squat.headlesskamp;

import java.util.ArrayList;
import java.util.Collection;
import java.util.List;

import org.eclipse.emf.ecore.EObject;
import org.eclipse.emf.ecore.util.EcoreUtil;
import org.palladiosimulator.pcm.repository.Repository;

import de.uka.ipd.sdq.componentInternalDependencies.ComponentInternalDependencyRepository;
import edu.kit.ipd.sdq.kamp.core.Activity;
import edu.kit.ipd.sdq.kamp.core.ArchitectureVersion;

public class KAMPHelper {
	
	public static ArchitectureVersion createArchitectureVersionClone(ArchitectureVersion base, String cloneName) {
		Collection<EObject> collection = new ArrayList<EObject>();
		collection.add(base.getRepository());
		collection.add(base.getSystem());
		collection.add(base.getFieldOfActivityRepository());
		collection.add(base.getModificationMarkRepository());
		collection.add(base.getComponentInternalDependencyRepository());
		Collection<EObject> clonedCollection = EcoreUtil.copyAll(collection);
		ArchitectureVersion clone = new ArchitectureVersion(
				cloneName, 
				(Repository) clonedCollection.toArray()[0], 
				(System) clonedCollection.toArray()[1], 
				(FieldOfActivityRepository) clonedCollection.toArray()[2], 
				(ModificationMarkRepository) clonedCollection.toArray()[3], 
				(ComponentInternalDependencyRepository) clonedCollection.toArray()[4]
		);
		return clone;
	}
	
	public static void printActivities(List<Activity> activityList, String prefix) {
		if (prefix==null)
			prefix="";
		
		for (Activity activity : activityList) {
			System.out.println(prefix + " " + activity.getBasicActivity() + " " + activity.getElementType() + " " + activity.getElementName());
			if (!activity.getSubactivities().isEmpty()) {
				printActivities(activity.getSubactivities(), prefix + "=");
			}
			if (!activity.getFollowupActivities().isEmpty()) {
				printActivities(activity.getFollowupActivities(), prefix+"->");
			}
		}
	}
}
